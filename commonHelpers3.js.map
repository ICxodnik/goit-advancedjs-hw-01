{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash.throttle';\n\nconst form = document.querySelector(\".feedback-form\");\nconst initValues = localStorage.getItem('feedback-form-state');\n\nif (initValues) {\n    try {\n        const data = JSON.parse(initValues)\n        setFormData(data);\n    }\n    catch (err) {\n        console.error(\"Can't read saved form data\", err);\n    }\n}\n\nfunction setFormData(data) {\n    for (const [name, value] of Object.entries(data)) {\n        form.elements[name].value = value;\n    }\n}\n\nfunction getFormData() {\n    const formData = new FormData(form);\n\n    return {\n        'email': formData.get('email'),\n        'message': formData.get('message'),\n    };\n}\n\nfunction saveCurrentForm() {\n    const data = getFormData();\n\n    localStorage.setItem('feedback-form-state', JSON.stringify(data));\n}\n\nconst saveForm = throttle(saveCurrentForm, 500);\n\nform.addEventListener('input', () => {\n    saveForm();\n});\n\nform.addEventListener('submit', (e) => {\n    e.preventDefault();\n\n    const data = getFormData();\n    console.log(data);\n\n    setFormData({ email: \"\", message: \"\" });\n    saveCurrentForm();\n});\n"],"names":["form","initValues","data","setFormData","err","name","value","getFormData","formData","saveCurrentForm","saveForm","throttle"],"mappings":"wIAEA,MAAMA,EAAO,SAAS,cAAc,gBAAgB,EAC9CC,EAAa,aAAa,QAAQ,qBAAqB,EAE7D,GAAIA,EACA,GAAI,CACA,MAAMC,EAAO,KAAK,MAAMD,CAAU,EAClCE,EAAYD,CAAI,CACnB,OACME,EAAK,CACR,QAAQ,MAAM,6BAA8BA,CAAG,CAClD,CAGL,SAASD,EAAYD,EAAM,CACvB,SAAW,CAACG,EAAMC,CAAK,IAAK,OAAO,QAAQJ,CAAI,EAC3CF,EAAK,SAASK,CAAI,EAAE,MAAQC,CAEpC,CAEA,SAASC,GAAc,CACnB,MAAMC,EAAW,IAAI,SAASR,CAAI,EAElC,MAAO,CACH,MAASQ,EAAS,IAAI,OAAO,EAC7B,QAAWA,EAAS,IAAI,SAAS,CACzC,CACA,CAEA,SAASC,GAAkB,CACvB,MAAMP,EAAOK,IAEb,aAAa,QAAQ,sBAAuB,KAAK,UAAUL,CAAI,CAAC,CACpE,CAEA,MAAMQ,EAAWC,EAASF,EAAiB,GAAG,EAE9CT,EAAK,iBAAiB,QAAS,IAAM,CACjCU,GACJ,CAAC,EAEDV,EAAK,iBAAiB,SAAW,GAAM,CACnC,EAAE,eAAc,EAEhB,MAAME,EAAOK,IACb,QAAQ,IAAIL,CAAI,EAEhBC,EAAY,CAAE,MAAO,GAAI,QAAS,EAAI,CAAA,EACtCM,GACJ,CAAC"}